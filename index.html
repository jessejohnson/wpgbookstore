<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>WPG Books</title>

  <!-- Bootstrap -->
  <link href="/static/css/bootstrap.min.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
    </head>
    <body ng-app="bookstoreapp">
      <div class="container">
        <h1>WPG Books!</h1>
        <div ng-controller="mainCtrl">

          <div class="row">
            <ul class="list-inline">
              <li>
                <button class="btn btn-default" ng-click="viewCart()" data-toggle="modal" data-target="#cartModal">View Cart [{{order.cart.length}}]</button>
              </li>
            </ul>
          </div>

          <div class="row">
            <ul class="list-inline">
              <li ng-repeat="book in list"> 
                <a href="#" data-toggle="modal" data-target="#detailModal" ng-click="selectBook(book)">
                  <img src="{{book.image}}" alt="{{book.title}}" height="250px">
                  <br><br>
                  <p>{{book.title}} - {{book.amount}} {{book.currency}}</p>
                </a>
                <button ng-click="addToCart(book)">Add to Cart</button>
              </li>
            </ul>
          </div>


          <!-- detail modal -->
          <div class="modal fade" id="detailModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-body">
                  <h4>About {{currentBook.title}}</h4>
                  <p>{{currentBook.description}}</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                  <button type="button" class="btn btn-primary" ng-click="addToCart(currentBook)" data-dismiss="modal">Add To Cart</button>
                </div>
              </div>
            </div>
          </div>

          <!-- cart modal -->
          <div class="modal fade" id="cartModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title" id="myModalLabel">Your Cart</h4>
                </div>
                <div class="modal-body">
                  <table>
                    <tr ng-repeat="item in order.cart">
                      <td>{{item.title}}</td>
                      <td><input type="number" ng-model="item.qty" value="{{item.qty}}" min="1" required/></td>
                    </tr>
                  </table>

                  <h4>Complete order information</h4>
                  <form name="makeOrderForm">
                    <input class="" type="tel" ng-model="order.phoneNumber" placeholder="Enter your phone number" name="number" required>
                    <input class="" type="email" ng-model="order.email" placeholder="Enter your email address" name="email" required>
                    <select name="loc" class="" ng-model="order.location" required>
                      <option ng-repeat="place in places" value="{{place}}">{{place}}</option>
                    </select>
                    <button type="submit" class="btn btn-primary" ng-click="makeOrder()">Order Now</button>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>

          <div class="modal fade" id="orderModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-body">
                  <h3>Processing Your Order...</h3>
                  <p>Check your submitted email for your order code and final payment instructions</p>
                </div>
              </div>
            </div>
          </div>

          <!-- end ctrl -->
        </div>

      </div>


      <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
      <script src="/static/js/jquery-1.11.1.min.js"></script>
      <!-- Include all compiled plugins (below), or include individual files as needed -->
      <script src="/static/js/bootstrap.min.js"></script>
      <script src="/static/js/angular.min.js"></script>
      <script src="/static/data/books.json"></script>
      <script src="/static/js/store.js"></script>
    </body>
    </html>